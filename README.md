## 영화 리뷰 사이트(Movie Review) -개인 프로젝트


### 목적
---
* 영화의 정보를 간략하게 설명하고, 사용자들이 평점을 내리는 사이트를 만들자
* 간단한 게시판 기능을 넣어보자(기본 CRUD, 답변 구현)
* 스프링 시큐리티를 사용해서 로그인, 로그아웃 처리 구현
* AWS를 이용한 DB 관리(RDS), 배포 및 호스팅

### 개발 환경
---
> Front-End
* Bootstrap 4 (템플릿 구매 후 사용)
* Jquery 3

> Back-End
* Spring 5.0
* JDK 1.8
* Oracle 11g
* MyBatis 3.4
* Tomcat 8.5
* Maven 2.9

### 제작 기간 - 2020.02.03 ~ 2020.03.05 
---
> 1주차 (20.02.03 ~ 20.02.09)
* 02/03: 개발환경 설정 및 프로젝트 주제 설정.
* 02/04: 코로나 바이러스로 인한 스터디 중단. 개인프로젝트로 변경, Front-End 부분을 템플릿을 구매해서 사용하기로 결정.
* 02/05: 주제에 적합한 템플릿 선정, 사이트 전체 구조 계획, Oracle DB 모델 설계 및 생성.
* 02/06: 영화 등록 View (MovieSetting.jsp) 진행 => 영화 등록 Modal 및 등록 기능 완성.
* 02/07: 영화 등록 View (MovieSetting.jsp) 진행 => 페이징, Sort 처리 완성.
* 02/08: 영화 등록 View (MovieSetting.jsp) 진행 => 영화 등록, 수정, 삭제 Modal 구현 및 수정.
* 02/09: 영화 등록 View (MovieSetting.jsp) 완성 => 영화 수정시에 등록한 정보 불러오게 구현.

> 2주차 (20.02.10 ~ 20.02.16)
* 02/10: 메인 페이지 View (index.jsp) 완료 => 주제에 맞게 편집(최신 영화, 년간, 한국, 외국 영화 Best 5 보여주기).
* 02/11: 영화 정보 View (get.jsp) 진행 => IE, Edge에서 영화 이미지가 출력이 안되는 문제 확인.

         문제 원인: get으로 Parameter를 호출 시에 한글 및 빈칸이 있으면, Crome에서는 자동으로 인코딩 되지만, IE에서는
                   따로 설정을 해줘야 됨. 
         해결 방법: <c:url> 태그를 이용해서 파라미터를 인코딩 시켜줌.
        
* 02/12: 회원가입, 로그인 View (register.jsp, login.jsp) 완료 => 아이디 중복체크, 패스워드 , 이메일 유효성 검사.
* 02/13: 로그인, 로그아웃 처리 진행 => Spring Security 이용 .
* 02/14: 로그인, 로그아웃 이후 처리 완료 => 로그인 후에 원래 있던 페이지로 이동, 로그인 실패 시 메시지 출력.
* 02/15: 휴식
* 02/16: 영화 정보 View (get.jsp) 진행 => 리뷰 CRUD, 페이징 진행(Ajax로 구현).

         문제점: Ajax를 통해서 리뷰를 삭제 시에 405에러가 뜸.
         문제 원인: Spring Security에서는 Post방식으로 호출 시에 CSRF 공격 방지를 자동으로 하기 때문에 에러가 생김.
         해결 방법: Security-context에서 CSRF 공격 방지 기능을 막거나, POST 방식으로 전달 시에 CSRF 방지 토큰을 같이 전달.
         
> 3주차 (20.02.17 ~ 20.02.23)        
* 02/17: 영화 정보 View(get.jsp) 완료 => 해당 영화에 리뷰를 작성 시에는 리뷰 작성 창 숨기기, 수정, 삭제 버튼 보이게 하기.
* 02/18: 마이페이지 View (mypage.jsp, userInfo, withdrawal.jap) 완료 => 사용자가 작성한 리뷰 목록 출력, 삭제 기능, 정보 수정, 탈퇴 기능 구현.
* 02/19: header.jsp, footer.jsp, sidebar.jsp 완료.
* 02/20: 영화 리스트 View (movieList.jsp) 진행 => 정렬, 페이징 기능 구현.
* 02/21: 영화 리스트 View (movieList.jsp) 완료 => 장르를 checkbox로 검색(장르 3개까지)해서 정렬하는 기능 구현.
* 02/22: 메인 View (index.jsp) 검색 기능 완료 => 영화 제목을 입력하면, movieList.jsp로 이동 후 조회.
* 02/23: 공지사항 View (notice.jsp) 진행 => admin 계정만 CRUD 가능하게 구현, 나머지 사용자는 조회만 할 수 있게 진행.

> 4주차 (20.02.24 ~ 20.03.01)
* 02/24: 공지사항 View (notice.jsp, get.jsp, modify.jsp) 완료 => 검색 기능, 페이징 구현.
* 02/25: 자유게시판 View (article.jsp, get.jsp, modify.jsp) 진행 => 조회 페이지만 각자 사용하고, get.jsp, modify.jsp 같이 사용할 수 있게 진행.
* 02/26: 공지사항, 자유게시판 View (notice.jsp, article.jsp) => 답변 기능 및 계층형 조회 가능하게 진행.

         문제점: 답변 글이 원본 글 밑에 순서대로 정렬이 되지 않음.
         해결 방법: 인라인 뷰 안에 다시 한 번 원본, 그룹 번호 순으로 정렬시킴.

* 02/27: 구현된 기능들 보완 및 코드 재정리.
* 02/28: 프로젝트 배포 테스트 => War 파일로 Export 후에 Tomcat 서버에 배포.
* 02/29: AWS EC2 인스턴스 생성, RDS 생성(기존 DB와 연동)
* 03/01: AWS 서버 우분투에서 환경 설정 => Putty를 이용한 우분투 원격 접속, JDK 1.8 설치, Tomcat 8.5 설치

> 5주차 (20.03.02 ~ 20.03.05)
* 03/02: Filezillar를 이용한 서버쪽에 War 파일 전송 및 배포 테스트.

         문제점: 우분투에서의 배포 테스트 진행 시에 404 에러 발생.
         문제 원인: root-context.xml에서의 jdbc 경로와 id, password를 변경하지 않음.
         해결 방법: jdbc의 경로와 id, password를 RDS에서 생성한 엔드포인트, id, password로 변경.
         
* 03/03: 서버에서 프로젝트 배포 테스트 진행.

         문제점: 사이트가 정상적으로 작동은 되지만, 이미지가 출력이 안되는 문제 발견.
         문제 원인: 영화 이미지 업로드 시, 경로가 C:로 되있는 것을 서버쪽에 맞는 경로를 설정해야됨.
         해결 방법: /home/ubuntu/ 경로에 새롭게 upload 폴더 생성 후에 해당 경로로 이미지 업로드 변경.
         
* 03/04: 도메인, 호스팅 홈페이지를 이용해서 호스팅 진행 => 도메인 이름 구매 후, AWS의 Route53을 이용해서 DNS 서비스 완료.
* 03/05: 최종 마무리

### filmjoa 패키지 구조
---
![filmjoaPackage](https://user-images.githubusercontent.com/61972539/76237974-73fd5f00-6272-11ea-9c27-18a40c137f7e.png)
         
